// Generated by Knoux-Integrator AI — 2026-01-26 — Updated to use window.knoux API
import { useState, useCallback } from 'react';

interface UseAIReturn {
  isProcessing: boolean;
  error: string | null;
  summarize: (text: string) => Promise<string | null>;
  enhance: (text: string, options?: any) => Promise<string | null>;
  predict: (context: any) => Promise<any>;
}

export const useAI = (): UseAIReturn => {
  const [isProcessing, setIsProcessing] = useState(false);
  const [error, setError] = useState<string | null>(null);

  const summarize = useCallback(async (text: string): Promise<string | null> => {
    if (!window.knoux?.ai?.summarize) {
      setError('AI summarize API not available');
      return null;
    }

    try {
      setIsProcessing(true);
      setError(null);
      
      const response = await window.knoux.ai.summarize(text);
      
      if (response && response.ok) {
        return response.data || null;
      } else {
        setError(response?.error || 'Summarization failed');
        return null;
      }
    } catch (err) {
      setError(err instanceof Error ? err.message : 'Unknown error');
      return null;
    } finally {
      setIsProcessing(false);
    }
  }, []);

  const enhance = useCallback(async (text: string, options?: any): Promise<string | null> => {
    if (!window.knoux?.ai?.enhance) {
      setError('AI enhance API not available');
      return null;
    }

    try {
      setIsProcessing(true);
      setError(null);
      
      const response = await window.knoux.ai.enhance(text, options);
      
      if (response && response.ok) {
        return response.data || null;
      } else {
        setError(response?.error || 'Enhancement failed');
        return null;
      }
    } catch (err) {
      setError(err instanceof Error ? err.message : 'Unknown error');
      return null;
    } finally {
      setIsProcessing(false);
    }
  }, []);

  const predict = useCallback(async (context: any): Promise<any> => {
    if (!window.knoux?.ai?.predict) {
      setError('AI predict API not available');
      return null;
    }

    try {
      setIsProcessing(true);
      setError(null);
      
      const response = await window.knoux.ai.predict(context);
      
      if (response && response.ok) {
        return response.data || null;
      } else {
        setError(response?.error || 'Prediction failed');
        return null;
      }
    } catch (err) {
      setError(err instanceof Error ? err.message : 'Unknown error');
      return null;
    } finally {
      setIsProcessing(false);
    }
  }, []);

  return {
    isProcessing,
    error,
    summarize,
    enhance,
    predict
  };
};

export default useAI;